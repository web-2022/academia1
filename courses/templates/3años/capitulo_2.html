{% extends 'courses/base_3años.html' %}

{% block title %}Capítulo 1: Números y Contar{% endblock %}

{% block content %}

<div class="container-fluid">
  <div class="row">
<!-- Menú para capítulos -->
<div class="row p-3 d-flex justify-content-center">
  <div class="col-12">
    <!-- Botón del menú desplegable -->
    <button class="btn btn-primary w-100 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#capitulosMenu" aria-expanded="false" aria-controls="capitulosMenu">
      Menú de capítulos
    </button>

    <!-- Menú desplegable para dispositivos móviles -->
    <div class="collapse d-md-none" id="capitulosMenu">
      <ul class="list-group mt-2">
        <li class="list-group-item">
          <h2 class="text-success">03 años:</h2>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=1 %}">Capítulo 1: Aprender los números</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=2 %}">Capítulo 2: Aprender a contar</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=3 %}">Capítulo 3: Comparar cantidades</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=4 %}">Capítulo 4: Identificar formas geométricas</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=5 %}">Capítulo 5: Aprender posicionamiento espacial</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=6 %}">Capítulo 6: Identificar Patrones</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=7 %}">Capítulo 7: Identificar Secuencias</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=8 %}">Capítulo 8: Comparar objetos por tamaño</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=9 %}">Capítulo 9: Comparar objetos por longitud</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=10 %}">Capítulo 10: Sumar figuras geométricas</a>
        </li>
      </ul>
    </div>

    <!-- Menú horizontal para pantallas grandes -->
    <ul class="list-group list-group-horizontal d-none d-md-flex flex-wrap mt-3">
      <li class="list-group-item flex-fill">
        <h2 class="text-success">03 años:</h2>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=1 %}">Capítulo 1: Aprender los números</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=2 %}">Capítulo 2: Aprender a contar</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=3 %}">Capítulo 3: Comparar cantidades</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=4 %}">Capítulo 4: Identificar formas geométricas</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=5 %}">Capítulo 5: Aprender posicionamiento espacial</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=6 %}">Capítulo 6: Identificar Patrones</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=7 %}">Capítulo 7: Identificar Secuencias</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=8 %}">Capítulo 8: Comparar objetos por tamaño</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=9 %}">Capítulo 9: Comparar objetos por longitud</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=10 %}">Capítulo 10: Sumar figuras geométricas</a>
      </li>
    </ul>
  </div>
</div>



    <!-- Capítulo 2: Aprender a contar-->
    <div class="container">
      <h2 class="text-primary">¡Cuenta las pelotas!</h2>
      <p class="lead">Haz clic en el número correcto:</p>
      <div class="btn-group" role="group">
        <button id="generate-btn-5" class="btn btn-primary">Generar</button>

      </div>
      <div id="feedback" class="feedback"></div>
      <div id="circle-container" class="mt-4"></div>
      <div id="options-container" class="mt-4"></div>

    </div>

    <script>

      // Manejo de generación de pelotas y opciones
      document.getElementById('generate-btn-5').addEventListener('click', () => generateBalls(5));


      function generateBalls(maxBalls) {
        const circleContainer = document.getElementById('circle-container');
        const optionsContainer = document.getElementById('options-container');
        const feedback = document.getElementById('feedback');

        // Limpia el contenido previo
        circleContainer.innerHTML = '';
        optionsContainer.innerHTML = '';
        feedback.textContent = '';

        // Genera un número aleatorio de pelotas
        const numBalls = Math.floor(Math.random() * maxBalls) + 1;

        // Crea las pelotas y las posiciona aleatoriamente dentro del círculo
        for (let i = 0; i < numBalls; i++) {
          const ball = document.createElement('div');
          ball.className = 'ball';

          // Posición aleatoria dentro del círculo
          const angle = Math.random() * 2 * Math.PI;
          const radius = Math.random() * 40 + 20; // Ajustar para que no salgan fuera del círculo
          const x = 50 + radius * Math.cos(angle); // Posición X como porcentaje
          const y = 50 + radius * Math.sin(angle); // Posición Y como porcentaje

          ball.style.position = 'absolute';
          ball.style.left = `calc(${x}% - 25px)`; // Ajuste para centrar (50px es el tamaño del balón)
          ball.style.top = `calc(${y}% - 25px)`;

          circleContainer.appendChild(ball);
        }

        // Genera opciones de respuesta
        const options = new Set();
        options.add(numBalls);

        while (options.size < 4) {
          options.add(Math.floor(Math.random() * maxBalls) + 1);
        }

        // Ordena y muestra las opciones
        Array.from(options).sort(() => Math.random() - 0.5).forEach(option => {
          const button = document.createElement('button');
          button.textContent = option;
          button.className = 'btn btn-outline-primary option-btn';
          button.addEventListener('click', () => {
            if (option === numBalls) {
              feedback.textContent = '¡Correcto!';
              feedback.style.color = 'green';
              setTimeout(() => generateBalls(maxBalls), 2000); // Genera nuevas pelotas después de 2 segundos
            } else {
              feedback.textContent = 'Intenta de nuevo.';
              feedback.style.color = 'red';
            }
          });
          optionsContainer.appendChild(button);
        });
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </div>
</div>
{% endblock %}