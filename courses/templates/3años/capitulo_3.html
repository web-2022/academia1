{% extends 'courses/base_3aÃ±os.html' %}

{% block title %}CapÃ­tulo 1: NÃºmeros y Contar{% endblock %}

{% block content %}

<!-- Sidebar for chapters -->
<div class="row p-3 d-flex justify-content-center">

    <ul class="list-group list-group-horizontal d-flex flex-wrap">
        <li class="list-group-item flex-fill">
            <a href="{% url 'capitulo' capitulo_id=1 %}">CapÃ­tulo 1: NÃºmeros y Contar</a>
        </li>
        <li class="list-group-item flex-fill">
            <a href="{% url 'capitulo' capitulo_id=2 %}">CapÃ­tulo 2: Sumas y Restas</a>
        </li>
        <li class="list-group-item flex-fill">
            <a href="{% url 'capitulo' capitulo_id=3 %}">CapÃ­tulo 3: Multiplicaciones</a>
        </li>
        <li class="list-group-item flex-fill">
            <a href="{% url 'capitulo' capitulo_id=4 %}">CapÃ­tulo 4: DivisiÃ³n</a>
        </li>
    </ul>
</div>
<!-- Main content -->
<div class="container">
    <h2 class="text-primary">Â¡Aprendamos a Sumar!</h2>
    <div class="question" id="question">Â¿CuÃ¡nto es 2 + 3?</div>
    <div id="options" class="mt-4"></div>
    <div id="result"></div>
    <div id="reward">Â¡Muy bien! ðŸŒŸ</div>
</div>

<script>
    function generateSumQuestion() {
        const questionElement = document.getElementById('question');
        const optionsContainer = document.getElementById('options');
        const resultContainer = document.getElementById('result');
        const reward = document.getElementById('reward');

        // Reset containers
        optionsContainer.innerHTML = '';
        resultContainer.textContent = '';
        reward.style.display = 'none';

        // Generate random numbers for the sum
        const num1 = Math.floor(Math.random() * 5) + 1; // Numbers between 1 and 5
        const num2 = Math.floor(Math.random() * 5) + 1;
        const correctAnswer = num1 + num2;

        // Update the question
        questionElement.textContent = `Â¿CuÃ¡nto es ${num1} + ${num2}?`;

        // Generate options (including the correct answer)
        const options = new Set();
        while (options.size < 4) {
            const randomOption = Math.floor(Math.random() * 10) + 1; // Random options
            options.add(randomOption);
        }
        options.add(correctAnswer);

        // Shuffle and display options
        const shuffledOptions = Array.from(options).sort(() => Math.random() - 0.5);
        shuffledOptions.forEach(option => {
            const button = document.createElement('button');
            button.className = 'option-btn';
            button.textContent = option;

            button.addEventListener('click', () => {
                if (option === correctAnswer) {
                    resultContainer.textContent = 'Â¡Correcto!';
                    reward.style.display = 'block';
                    setTimeout(() => generateSumQuestion(), 3000);
                } else {
                    resultContainer.textContent = 'IntÃ©ntalo de nuevo.';
                }
            });

            optionsContainer.appendChild(button);
        });
    }

    // Generate the first question on load
    generateSumQuestion();
</script>
{% endblock %}