{% extends 'courses/base_3años.html' %}

{% block title %}Capítulo 1: Números y Contar{% endblock %}

{% block content %}

<div class="container-fluid">
  <div class="row">
<!-- Menú para capítulos -->
<div class="row p-3 d-flex justify-content-center">
  <div class="col-12">
    <!-- Botón del menú desplegable -->
    <button class="btn btn-primary w-100 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#capitulosMenu" aria-expanded="false" aria-controls="capitulosMenu">
      Menú de capítulos
    </button>

    <!-- Menú desplegable para dispositivos móviles -->
    <div class="collapse d-md-none" id="capitulosMenu">
      <ul class="list-group mt-2">
        <li class="list-group-item">
          <h2 class="text-success">03 años:</h2>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=1 %}">Capítulo 1: Aprender los números</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=2 %}">Capítulo 2: Aprender a contar</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=3 %}">Capítulo 3: Comparar cantidades</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=4 %}">Capítulo 4: Identificar formas geométricas</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=5 %}">Capítulo 5: Aprender posicionamiento espacial</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=6 %}">Capítulo 6: Identificar Patrones</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=7 %}">Capítulo 7: Identificar Secuencias</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=8 %}">Capítulo 8: Comparar objetos por tamaño</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=9 %}">Capítulo 9: Comparar objetos por longitud</a>
        </li>
        <li class="list-group-item border border-primary">
          <a href="{% url 'capitulo' capitulo_id=10 %}">Capítulo 10: Sumar figuras geométricas</a>
        </li>
      </ul>
    </div>

    <!-- Menú horizontal para pantallas grandes -->
    <ul class="list-group list-group-horizontal d-none d-md-flex flex-wrap mt-3">
      <li class="list-group-item flex-fill">
        <h2 class="text-success">03 años:</h2>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=1 %}">Capítulo 1: Aprender los números</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=2 %}">Capítulo 2: Aprender a contar</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=3 %}">Capítulo 3: Comparar cantidades</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=4 %}">Capítulo 4: Identificar formas geométricas</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=5 %}">Capítulo 5: Aprender posicionamiento espacial</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=6 %}">Capítulo 6: Identificar Patrones</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=7 %}">Capítulo 7: Identificar Secuencias</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=8 %}">Capítulo 8: Comparar objetos por tamaño</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=9 %}">Capítulo 9: Comparar objetos por longitud</a>
      </li>
      <li class="list-group-item flex-fill border border-primary">
        <a href="{% url 'capitulo' capitulo_id=10 %}">Capítulo 10: Sumar figuras geométricas</a>
      </li>
    </ul>
  </div>
</div>



    <!-- Capítulo 1: Aprender los números -->
    <div class="container text-center">
      <h1 class="my-4 animated-text">¡Aprendamos los Números del 1 al 10!</h1>
      <p class="lead">Haz clic en un número para ver las pelotas.</p>
  
      <!-- Números -->
      <div class="btn-container">
        <div class="btn-group">
          <div class="number-btn" onclick="generateBalls(1)">1</div>
          <div class="number-btn" onclick="generateBalls(2)">2</div>
          <div class="number-btn" onclick="generateBalls(3)">3</div>
          <div class="number-btn" onclick="generateBalls(4)">4</div>
          <div class="number-btn" onclick="generateBalls(5)">5</div>
          <div class="number-btn" onclick="generateBalls(6)">6</div>
          <div class="number-btn" onclick="generateBalls(7)">7</div>
          <div class="number-btn" onclick="generateBalls(8)">8</div>
          <div class="number-btn" onclick="generateBalls(9)">9</div>
          <div class="number-btn" onclick="generateBalls(10)">10</div>
        </div>
      </div>
  
      <!-- Contenedor para las pelotas dentro de un rectángulo -->
      <div id="rectangle-container"></div>
  
      <!-- Retroalimentación -->
      <div id="feedback" class="feedback"></div>
    </div>
  
    <script>
      function generateBalls(number) {
        const rectangleContainer = document.getElementById('rectangle-container');
        const feedback = document.getElementById('feedback');
        const containerWidth = rectangleContainer.offsetWidth;
        const containerHeight = rectangleContainer.offsetHeight;
  
        // Limpia las pelotas y el feedback previo
        rectangleContainer.innerHTML = '';
        feedback.textContent = '';
  
        // Arreglo para almacenar las posiciones de las pelotas
        const positions = [];
  
        // Generar pelotas
        for (let i = 0; i < number; i++) {
          let x, y, overlapping;
  
          // Buscar una posición que no se solape con otras pelotas
          do {
            overlapping = false;
            x = Math.random() * (containerWidth - 40); // Genera una posición X dentro del rectángulo
            y = Math.random() * (containerHeight - 40); // Genera una posición Y dentro del rectángulo
  
            // Comprobar si la nueva pelota se solapa con alguna existente
            for (const pos of positions) {
              const distanceBetween = Math.sqrt(Math.pow(x - pos.x, 2) + Math.pow(y - pos.y, 2));
              if (distanceBetween < 50) { // 50px es el tamaño de las pelotas + espacio adicional
                overlapping = true;
                break;
              }
            }
          } while (overlapping);
  
          // Guardamos la posición de la pelota
          positions.push({ x, y });
  
          // Crear y posicionar la pelota
          const ball = document.createElement('div');
          ball.className = 'ball';
          ball.style.left = `${x}px`;
          ball.style.top = `${y}px`;
          rectangleContainer.appendChild(ball);
        }
  
        // Retroalimentación visual
        feedback.textContent = `HAY ${number} ${number === 1 ? 'PELOTA' : 'PELOTAS'}`;
        feedback.style.color = '#007bff';
        
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </div>
</div>
{% endblock %}